# ============================================================
# Encarta Production Configuration
# ============================================================
# Copy this file to .env and fill in the values.
# The setup.sh script will generate secrets automatically.
# ============================================================

# --- Required: Core Application ---
# The public URL where Encarta will be accessible (no trailing slash)
FRONTEND_URL=http://localhost:3000

# Secret key for Rails session encryption (auto-generated by setup.sh)
SECRET_KEY_BASE=

# Active Record encryption keys (auto-generated by setup.sh)
ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY=
ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=
ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=

# --- Required: PostgreSQL ---
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=
POSTGRES_DATABASE=encarta_production

# --- Required: Redis ---
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=

# --- Application Settings ---
RAILS_ENV=production
INSTALLATION_ENV=docker
RAILS_LOG_TO_STDOUT=true
LOG_LEVEL=info
RAILS_MAX_THREADS=5
ENABLE_ACCOUNT_SIGNUP=true

# Port to expose Encarta on the host (default 3000)
ENCARTA_PORT=3000

# Path to the Encarta source tree (for docker compose build)
ENCARTA_SOURCE_PATH=/home/chatwoot/chatwoot

# --- SMTP (Email) ---
# Required for sending emails (password resets, notifications)
MAILER_SENDER_EMAIL=
SMTP_DOMAIN=
SMTP_ADDRESS=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTHENTICATION=login
SMTP_ENABLE_STARTTLS_AUTO=true
SMTP_OPENSSL_VERIFY_MODE=none

# --- On-Call Middleware ---
# These are configured AFTER first login. See README.md.
# Create an API token in Encarta: Settings > Profile > Access Token
CHATWOOT_API_TOKEN=
CHATWOOT_ACCOUNT_ID=1
POLL_INTERVAL_MS=30000
HOOK_REFRESH_MS=300000

# --- Optional: Storage ---
# Default is local storage. For S3/GCS, set these:
ACTIVE_STORAGE_SERVICE=local
# S3_BUCKET_NAME=
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=

# --- Optional: SSL ---
FORCE_SSL=false
